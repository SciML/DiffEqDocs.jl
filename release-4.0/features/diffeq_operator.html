<!DOCTYPE html>

<html lang="en"><head><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><title>DiffEqOperators · DifferentialEquations.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script data-main="../assets/documenter.js" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="https://docs.juliadiffeq.org/stable/features/diffeq_operator/index.html" rel="canonical"/></head><body><nav class="toc"><a href="../index.html"><img alt="DifferentialEquations.jl logo" class="logo" src="../assets/logo.png"/></a><h1>DifferentialEquations.jl</h1><select id="version-selector" onchange="window.location.href=this.value" style="visibility: hidden"></select><form action="../search.html" class="search" id="search-form"><input id="search-query" name="q" placeholder="Search docs" type="text"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><span class="toctext">Tutorials</span><ul><li><a class="toctext" href="../tutorials/ode_example.html">Ordinary Differential Equations</a></li><li><a class="toctext" href="../tutorials/sde_example.html">Stochastic Differential Equations</a></li><li><a class="toctext" href="../tutorials/rode_example.html">Random Ordinary Differential Equations</a></li><li><a class="toctext" href="../tutorials/dde_example.html">Delay Differential Equations</a></li><li><a class="toctext" href="../tutorials/dae_example.html">Differential Algebraic Equations</a></li><li><a class="toctext" href="../tutorials/discrete_stochastic_example.html">Discrete Stochastic (Gillespie) Equations</a></li><li><a class="toctext" href="../tutorials/jump_diffusion.html">Jump Diffusion Equations</a></li><li><a class="toctext" href="../tutorials/bvp_example.html">Boundary Value Problems</a></li><li><a class="toctext" href="../tutorials/additional.html">Additional Tutorials</a></li></ul></li><li><span class="toctext">Basics</span><ul><li><a class="toctext" href="../basics/overview.html">Overview of DifferentialEquations.jl</a></li><li><a class="toctext" href="../basics/common_solver_opts.html">Common Solver Options</a></li><li><a class="toctext" href="../basics/solution.html">Solution Handling</a></li><li><a class="toctext" href="../basics/plot.html">Plot Functions</a></li><li><a class="toctext" href="../basics/integrator.html">Integrator Interface</a></li><li><a class="toctext" href="../basics/faq.html">Frequently Asked Questions</a></li><li><a class="toctext" href="../basics/compatibility_chart.html">Solver Compatibility Chart</a></li></ul></li><li><span class="toctext">Problem Types</span><ul><li><a class="toctext" href="../types/discrete_types.html">Discrete Problems</a></li><li><a class="toctext" href="../types/ode_types.html">ODE Problems</a></li><li><a class="toctext" href="../types/dynamical_types.html">Dynamical, Hamiltonian and 2nd Order ODE Problems</a></li><li><a class="toctext" href="../types/split_ode_types.html">Split ODE Problems</a></li><li><a class="toctext" href="../types/steady_state_types.html">Steady State Problems</a></li><li><a class="toctext" href="../types/bvp_types.html">BVP Problems</a></li><li><a class="toctext" href="../types/sde_types.html">SDE Problems</a></li><li><a class="toctext" href="../types/rode_types.html">RODE Problems</a></li><li><a class="toctext" href="../types/dde_types.html">DDE Problems</a></li><li><a class="toctext" href="../types/dae_types.html">DAE Problems</a></li><li><a class="toctext" href="../types/jump_types.html">Jump Problems</a></li></ul></li><li><span class="toctext">Solver Algorithms</span><ul><li><a class="toctext" href="../solvers/discrete_solve.html">Discrete Solvers</a></li><li><a class="toctext" href="../solvers/ode_solve.html">ODE Solvers</a></li><li><a class="toctext" href="../solvers/dynamical_solve.html">Dynamical, Hamiltonian, and 2nd Order ODE Solvers</a></li><li><a class="toctext" href="../solvers/split_ode_solve.html">Split ODE Solvers</a></li><li><a class="toctext" href="../solvers/steady_state_solve.html">Steady State Solvers</a></li><li><a class="toctext" href="../solvers/bvp_solve.html">BVP Solvers</a></li><li><a class="toctext" href="../solvers/sde_solve.html">SDE Solvers</a></li><li><a class="toctext" href="../solvers/rode_solve.html">RODE Solvers</a></li><li><a class="toctext" href="../solvers/dde_solve.html">DDE Solvers</a></li><li><a class="toctext" href="../solvers/dae_solve.html">DAE Solvers</a></li><li><a class="toctext" href="../solvers/benchmarks.html">Solver Benchmarks</a></li></ul></li><li><span class="toctext">Additional Features</span><ul><li><a class="toctext" href="performance_overloads.html">Performance Overloads</a></li><li><a class="toctext" href="diffeq_arrays.html">DiffEq-Specific Array Types</a></li><li class="current"><a class="toctext" href="diffeq_operator.html">DiffEqOperators</a><ul class="internal"><li><a class="toctext" href="#Using-DiffEqOperators-1">Using DiffEqOperators</a></li><li><a class="toctext" href="#Constructors-1">Constructors</a></li><li><a class="toctext" href="#Formal-Properties-of-DiffEqOperators-1">Formal Properties of DiffEqOperators</a></li></ul></li><li><a class="toctext" href="noise_process.html">Noise Processes</a></li><li><a class="toctext" href="linear_nonlinear.html">Specifying (Non)Linear Solvers</a></li><li><a class="toctext" href="callback_functions.html">Event Handling and Callback Functions</a></li><li><a class="toctext" href="callback_library.html">Callback Library</a></li><li><a class="toctext" href="monte_carlo.html">Parallel Monte Carlo Simulations</a></li><li><a class="toctext" href="io.html">I/O: Saving and Loading Solution Data</a></li><li><a class="toctext" href="low_dep.html">Low Dependency Usage</a></li><li><a class="toctext" href="progress_bar.html">Juno Progress Bar Integration</a></li></ul></li><li><span class="toctext">Analysis Tools</span><ul><li><a class="toctext" href="../analysis/parameterized_functions.html">ParameterizedFunctions</a></li><li><a class="toctext" href="../analysis/parameter_estimation.html">Parameter Estimation</a></li><li><a class="toctext" href="../analysis/bifurcation.html">Bifurcation Analysis</a></li><li><a class="toctext" href="../analysis/sensitivity.html">Sensitivity Analysis</a></li><li><a class="toctext" href="../analysis/uncertainty_quantification.html">Uncertainty Quantification</a></li><li><a class="toctext" href="../analysis/dev_and_test.html">Algorithm Development and Testing</a></li></ul></li><li><span class="toctext">Domain Modeling Tools</span><ul><li><a class="toctext" href="../models/multiscale.html">Multi-Scale Models</a></li><li><a class="toctext" href="../models/physical.html">Physical Models</a></li><li><a class="toctext" href="../models/financial.html">Financial Models</a></li><li><a class="toctext" href="../models/biological.html">Chemical Reaction Models</a></li><li><a class="toctext" href="../models/external_modeling.html">External Modeling Packages</a></li></ul></li><li><span class="toctext">Extra Details</span><ul><li><a class="toctext" href="../extras/timestepping.html">Timestepping Method Descriptions</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Additional Features</li><li><a href="diffeq_operator.html">DiffEqOperators</a></li></ul><a class="edit-page" href="https://github.com/JuliaDiffEq/DiffEqDocs.jl/blob/master/docs/src/features/diffeq_operator.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>DiffEqOperators</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" href="#DiffEqOperators-1" id="DiffEqOperators-1">DiffEqOperators</a></h1><p>The <code>AbstractDiffEqOperator</code> interface is an interface for declaring parts of a differential equation as linear or affine. This then allows the solvers to exploit linearity to achieve maximal performance.</p><h2><a class="nav-anchor" href="#Using-DiffEqOperators-1" id="Using-DiffEqOperators-1">Using DiffEqOperators</a></h2><p><code>AbstractDiffEqOperator</code>s act like functions. When defined, <code>A</code> has function calls <code>A(t,u)</code> and <code>A(du,u,p,t)</code> that act like <code>A*u</code>. These operators update via a function <code>update_coefficients!(A,u,p,t)</code>.</p><h2><a class="nav-anchor" href="#Constructors-1" id="Constructors-1">Constructors</a></h2><h3><a class="nav-anchor" href="#Wrapping-an-Array:-DiffEqArrayOperator-1" id="Wrapping-an-Array:-DiffEqArrayOperator-1">Wrapping an Array: DiffEqArrayOperator</a></h3><p><code>DiffEqArrayOperator</code> is for defining an operator directly from an array. The operator is of the form</p><div>\[\alpha(t)A(t,u)\]</div><p>for some scalar <code>α</code> and time plus possibly state dependent <code>A</code>. The constructor is:</p><pre><code class="language-julia">DiffEqArrayOperator(A::AbstractMatrix{T},α=1.0,
                             update_func = DEFAULT_UPDATE_FUNC)</code></pre><p><code>A</code> is the operator array. <code>α</code> is the scalar coefficient. If <code>α</code> is a function <code>α(t)</code>, then it will update the coefficient as necessary. <code>update_func</code> is the function called by <code>update_coefficients!(A,u,p,t)</code> (along with <code>α</code> if it's a function). If left as its default, then <code>update_func</code> is trivial which signifies <code>A</code> is a constant.</p><h3><a class="nav-anchor" href="#AffineDiffEqOperator-1" id="AffineDiffEqOperator-1">AffineDiffEqOperator</a></h3><p>For <code>As = (A1,A2,...,An)</code> and <code>Bs = (B1,B2,...,Bn)</code> where each of the <code>Ai</code> and <code>Bi</code> are <code>DiffEqLinearOperator</code>s, the following constructor:</p><pre><code class="language-julia">function AffineDiffEqOperator{T}(As,Bs,u_cache=nothing)</code></pre><p>builds an operator <code>L = (A1 + A2 + ... An)*u + B1 + B2 + ... + Bn</code>. <code>u_cache</code> is for designating a type of internal cache for non-allocating evaluation of <code>L(du,u,p,t)</code>. If not given, the function <code>L(du,u,p,t)</code> is not available. Note that in solves which exploit this structure, this function call is not necessary. It's only used as the fallback in ODE solvers which were not developed for this structure.</p><h2><a class="nav-anchor" href="#Formal-Properties-of-DiffEqOperators-1" id="Formal-Properties-of-DiffEqOperators-1">Formal Properties of DiffEqOperators</a></h2><p>These are the formal properties that an <code>AbstractDiffEqOperator</code> should obey for it to work in the solvers.</p><h3><a class="nav-anchor" href="#AbstractDiffEqOperator-Interface-Description-1" id="AbstractDiffEqOperator-Interface-Description-1">AbstractDiffEqOperator Interface Description</a></h3><ol><li><p>Function call and multiplication: L(du,u,p,t) for inplace and du = L(t,u) for out-of-place, meaning L*u and A_mul_B!.</p></li><li><p>If the operator is not a constant, update it with (t,u). A mutating form, i.e. update_coefficients!(A,u,p,t) that changes the internal coefficients, and a out-of-place form B = update_coefficients(A,t,u).</p></li><li><p>is_constant(A) trait for whether the operator is constant or not.</p></li></ol><h3><a class="nav-anchor" href="#AbstractDiffEqLinearOpeartor-Interface-Description-1" id="AbstractDiffEqLinearOpeartor-Interface-Description-1">AbstractDiffEqLinearOpeartor Interface Description</a></h3><ol><li><p>AbstractDiffEqLinearOperator &lt;: AbstractDiffEqOperator</p></li><li><p>Can absorb under multiplication by a scalar. In all algorithms things like dt*L show up all the time, so the linear operator must be able to absorb such constants.</p></li><li><p>is_constant(A) trait for whether the operator is constant or not.</p></li><li><p>Optional: diagonal, symmetric, etc traits from LinearMaps.jl.</p></li><li><p>Optional: expm(A). Required for simple exponential integration.</p></li><li><p>Optional: expmv(A,t,u) = expm(t<em>A)</em>u and expmv!(v,A::DiffEqOperator,t,u) Required for sparse-saving exponential integration.</p></li><li><p>Optional: factorizations. A_ldiv_B, factorize et. al. This is only required for algorithms which use the factorization of the operator (Crank-Nicholson), and only for when the default linear solve is used.</p></li></ol><footer><hr/><a class="previous" href="diffeq_arrays.html"><span class="direction">Previous</span><span class="title">DiffEq-Specific Array Types</span></a><a class="next" href="noise_process.html"><span class="direction">Next</span><span class="title">Noise Processes</span></a></footer></article></body></html>
