<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Integrator Interface · DifferentialEquations.jl</title><meta name="title" content="Integrator Interface · DifferentialEquations.jl"/><meta property="og:title" content="Integrator Interface · DifferentialEquations.jl"/><meta property="twitter:title" content="Integrator Interface · DifferentialEquations.jl"/><meta name="description" content="Documentation for DifferentialEquations.jl."/><meta property="og:description" content="Documentation for DifferentialEquations.jl."/><meta property="twitter:description" content="Documentation for DifferentialEquations.jl."/><meta property="og:url" content="https://docs.sciml.ai/DiffEqDocs/stable/basics/integrator/"/><meta property="twitter:url" content="https://docs.sciml.ai/DiffEqDocs/stable/basics/integrator/"/><link rel="canonical" href="https://docs.sciml.ai/DiffEqDocs/stable/basics/integrator/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="DifferentialEquations.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">DifferentialEquations.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">DifferentialEquations.jl: Efficient Differential Equation Solving in Julia</a></li><li><a class="tocitem" href="../../getting_started/">Getting Started with Differential Equations in Julia</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/faster_ode_example/">Code Optimization for Differential Equations</a></li><li><a class="tocitem" href="../../tutorials/advanced_ode_example/">Solving Large Stiff Equations</a></li><li><a class="tocitem" href="../../tutorials/sde_example/">Stochastic Differential Equations</a></li><li><a class="tocitem" href="../../tutorials/rode_example/">Random Ordinary Differential Equations</a></li><li><a class="tocitem" href="../../tutorials/dde_example/">Delay Differential Equations</a></li><li><a class="tocitem" href="../../tutorials/dae_example/">Differential Algebraic Equations</a></li><li><a class="tocitem" href="../../tutorials/jump_diffusion/">Jump Diffusion Equations</a></li><li><a class="tocitem" href="../../tutorials/bvp_example/">Boundary Value Problems</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Beginner</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/classical_physics/">Classical Physics Models</a></li><li><a class="tocitem" href="../../examples/conditional_dosing/">Conditional Dosing in Pharmacometrics</a></li><li><a class="tocitem" href="../../examples/kepler_problem/">The Kepler Problem</a></li><li><a class="tocitem" href="../../examples/outer_solar_system/">Simulating the Outer Solar System</a></li><li><a class="tocitem" href="../../examples/min_and_max/">Finding Maxima and Minima of ODEs Solutions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4-2" type="checkbox"/><label class="tocitem" for="menuitem-4-2"><span class="docs-label">Advanced</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../examples/spiking_neural_systems/">Spiking Neural Systems</a></li><li><a class="tocitem" href="../../examples/beeler_reuter/">An Implicit/Explicit CUDA-Accelerated Solver for the 2D Beeler-Reuter Model</a></li><li><a class="tocitem" href="../../examples/diffusion_implicit_heat_equation/">Solving the heat equation with diffusion-implicit time-stepping</a></li></ul></li></ul></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../overview/">Overview of DifferentialEquations.jl</a></li><li><a class="tocitem" href="../common_solver_opts/">Common Solver Options (Solve Keyword Arguments)</a></li><li><a class="tocitem" href="../solution/">Solution Handling</a></li><li><a class="tocitem" href="../plot/">Plot Functions</a></li><li class="is-active"><a class="tocitem" href>Integrator Interface</a><ul class="internal"><li><a class="tocitem" href="#Initialization-and-Stepping"><span>Initialization and Stepping</span></a></li><li><a class="tocitem" href="#Handling-Integrators"><span>Handling Integrators</span></a></li><li><a class="tocitem" href="#Function-Interface"><span>Function Interface</span></a></li><li><a class="tocitem" href="#Additional-Options"><span>Additional Options</span></a></li><li><a class="tocitem" href="#Plot-Recipe"><span>Plot Recipe</span></a></li></ul></li><li><a class="tocitem" href="../problem/">Problem Interface</a></li><li><a class="tocitem" href="../faq/">Frequently Asked Questions</a></li><li><a class="tocitem" href="../compatibility_chart/">Solver Compatibility Chart</a></li></ul></li><li><span class="tocitem">Problem Types</span><ul><li><a class="tocitem" href="../../types/discrete_types/">Discrete Problems</a></li><li><a class="tocitem" href="../../types/ode_types/">ODE Problems</a></li><li><a class="tocitem" href="../../types/nonautonomous_linear_ode/">Non-autonomous Linear ODE / Lie Group Problems</a></li><li><a class="tocitem" href="../../types/dynamical_types/">Dynamical, Hamiltonian and 2nd Order ODE Problems</a></li><li><a class="tocitem" href="../../types/split_ode_types/">Split ODE Problems</a></li><li><a class="tocitem" href="../../types/steady_state_types/">Steady State Problems</a></li><li><a class="tocitem" href="../../types/bvp_types/">BVP Problems</a></li><li><a class="tocitem" href="../../types/sde_types/">SDE Problems</a></li><li><a class="tocitem" href="../../types/sdae_types/">SDAE Problems</a></li><li><a class="tocitem" href="../../types/rode_types/">RODE Problems</a></li><li><a class="tocitem" href="../../types/dde_types/">DDE Problems</a></li><li><a class="tocitem" href="../../types/sdde_types/">SDDE Problems</a></li><li><a class="tocitem" href="../../types/dae_types/">DAE Problems</a></li></ul></li><li><span class="tocitem">Solver Algorithms</span><ul><li><a class="tocitem" href="../../solvers/discrete_solve/">Discrete Solvers</a></li><li><a class="tocitem" href="../../solvers/ode_solve/">ODE Solvers</a></li><li><a class="tocitem" href="../../solvers/nonautonomous_linear_ode/">Non-autonomous Linear ODE / Lie Group ODE Solvers</a></li><li><a class="tocitem" href="../../solvers/dynamical_solve/">Dynamical, Hamiltonian, and 2nd Order ODE Solvers</a></li><li><a class="tocitem" href="../../solvers/split_ode_solve/">Split ODE Solvers</a></li><li><a class="tocitem" href="../../solvers/steady_state_solve/">Steady State Solvers</a></li><li><a class="tocitem" href="../../solvers/bvp_solve/">BVP Solvers</a></li><li><a class="tocitem" href="../../solvers/sde_solve/">SDE Solvers</a></li><li><a class="tocitem" href="../../solvers/sdae_solve/">SDAE Solvers</a></li><li><a class="tocitem" href="../../solvers/rode_solve/">RODE Solvers</a></li><li><a class="tocitem" href="../../solvers/dde_solve/">DDE Solvers</a></li><li><a class="tocitem" href="../../solvers/sdde_solve/">SDDE Solvers</a></li><li><a class="tocitem" href="../../solvers/dae_solve/">Mass Matrix and Fully Implicit DAE Solvers</a></li><li><a class="tocitem" href="../../solvers/benchmarks/">Solver Benchmarks</a></li></ul></li><li><span class="tocitem">Additional Features</span><ul><li><a class="tocitem" href="../../features/performance_overloads/">Jacobians, Gradients, etc.</a></li><li><a class="tocitem" href="../../features/diffeq_arrays/">DiffEq-Specific Array Types</a></li><li><a class="tocitem" href="../../features/diffeq_operator/">Matrix-Free Linear Operators with SciMLOperators.jl</a></li><li><a class="tocitem" href="../../features/noise_process/">Noise Processes</a></li><li><a class="tocitem" href="../../features/linear_nonlinear/">Specifying (Non)Linear Solvers and Preconditioners</a></li><li><a class="tocitem" href="../../features/dae_initialization/">DAE Initialization</a></li><li><a class="tocitem" href="../../features/callback_functions/">Event Handling and Callback Functions</a></li><li><a class="tocitem" href="../../features/callback_library/">Callback Library</a></li><li><a class="tocitem" href="../../features/ensemble/">Parallel Ensemble Simulations</a></li><li><a class="tocitem" href="../../features/io/">I/O: Saving and Loading Solution Data</a></li><li><a class="tocitem" href="../../features/low_dep/">Reduced Compile Time, Optimizing Runtime, and Low Dependency Usage</a></li><li><a class="tocitem" href="../../features/progress_bar/">Progress Bar Integration</a></li></ul></li><li><span class="tocitem">External Solver APIs</span><ul><li><a class="tocitem" href="../../api/sundials/">Sundials.jl</a></li><li><a class="tocitem" href="../../api/daskr/">DASKR.jl</a></li></ul></li><li><span class="tocitem">OrdinaryDiffEq.jl API</span><ul><li><a class="tocitem" href="../../api/ordinarydiffeq/">OrdinaryDiffEq.jl: ODE solvers and utilities</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/usage/">Usage</a></li><li><input class="collapse-toggle" id="menuitem-10-3" type="checkbox"/><label class="tocitem" for="menuitem-10-3"><span class="docs-label">Explicit Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/Tsit5/">OrdinaryDiffEqTsit5</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/Verner/">OrdinaryDiffEqVerner</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/AdamsBashforthMoulton/">OrdinaryDiffEqAdamsBashforthMoulton</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/LowStorageRK/">OrdinaryDiffEqLowStorageRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/SSPRK/">OrdinaryDiffEqSSPRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/LowOrderRK/">OrdinaryDiffEqLowOrderRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/HighOrderRK/">OrdinaryDiffEqHighOrderRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/Feagin/">OrdinaryDiffEqFeagin</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/PRK/">OrdinaryDiffEqPRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/QPRK/">OrdinaryDiffEqQPRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/TaylorSeries/">OrdinaryDiffEqTaylorSeries</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/explicit/Extrapolation/">OrdinaryDiffEqExtrapolation</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10-4" type="checkbox"/><label class="tocitem" for="menuitem-10-4"><span class="docs-label">Semi-Implicit Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/ordinarydiffeq/semiimplicit/Rosenbrock/">OrdinaryDiffEqRosenbrock</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/semiimplicit/StabilizedRK/">OrdinaryDiffEqStabilizedRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/semiimplicit/ExponentialRK/">OrdinaryDiffEqExponentialRK</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10-5" type="checkbox"/><label class="tocitem" for="menuitem-10-5"><span class="docs-label">Implicit Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/ordinarydiffeq/implicit/SDIRK/">OrdinaryDiffEqSDIRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/implicit/FIRK/">OrdinaryDiffEqFIRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/implicit/BDF/">OrdinaryDiffEqBDF</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/implicit/Extrapolation/">OrdinaryDiffEqExtrapolation</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/implicit/PDIRK/">OrdinaryDiffEqPDIRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/implicit/Nordsieck/">OrdinaryDiffEqNordsieck</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10-6" type="checkbox"/><label class="tocitem" for="menuitem-10-6"><span class="docs-label">IMEX Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/ordinarydiffeq/imex/IMEXMultistep/">OrdinaryDiffEqIMEXMultistep</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/imex/StabilizedIRK/">OrdinaryDiffEqStabilizedIRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/imex/IMEXBDF/">OrdinaryDiffEqBDF</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10-7" type="checkbox"/><label class="tocitem" for="menuitem-10-7"><span class="docs-label">Dynamical ODE Explicit Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/ordinarydiffeq/dynamicalodeexplicit/RKN/">OrdinaryDiffEqRKN</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/dynamicalodeexplicit/SymplecticRK/">OrdinaryDiffEqSymplecticRK</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10-8" type="checkbox"/><label class="tocitem" for="menuitem-10-8"><span class="docs-label">Semilinear ODE Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/ordinarydiffeq/semilinear/ExponentialRK/">OrdinaryDiffEqExponentialRK</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/semilinear/Linear/">OrdinaryDiffEqLinear</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10-9" type="checkbox"/><label class="tocitem" for="menuitem-10-9"><span class="docs-label">Mass Matrix DAE Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/ordinarydiffeq/massmatrixdae/Rosenbrock/">OrdinaryDiffEqRosenbrock</a></li><li><a class="tocitem" href="../../api/ordinarydiffeq/massmatrixdae/BDF/">OrdinaryDiffEqBDF</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10-10" type="checkbox"/><label class="tocitem" for="menuitem-10-10"><span class="docs-label">Fully Implicit DAE Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/ordinarydiffeq/fullyimplicitdae/BDF/">OrdinaryDiffEqBDF</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10-11" type="checkbox"/><label class="tocitem" for="menuitem-10-11"><span class="docs-label">Misc Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/ordinarydiffeq/misc/">Miscellaneous Solvers</a></li></ul></li></ul></li><li><span class="tocitem">StochasticDiffEq.jl API</span><ul><li><a class="tocitem" href="../../api/stochasticdiffeq/">StochasticDiffEq.jl: SDE solvers and utilities</a></li><li><a class="tocitem" href="../../api/stochasticdiffeq/usage/">Usage</a></li><li><input class="collapse-toggle" id="menuitem-11-3" type="checkbox"/><label class="tocitem" for="menuitem-11-3"><span class="docs-label">Nonstiff Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/stochasticdiffeq/nonstiff/basic_methods/">Basic Nonstiff Methods</a></li><li><a class="tocitem" href="../../api/stochasticdiffeq/nonstiff/sra_sri_methods/">SRA/SRI Methods - Stochastic Runge-Kutta</a></li><li><a class="tocitem" href="../../api/stochasticdiffeq/nonstiff/high_weak_order/">High Weak Order Methods</a></li><li><a class="tocitem" href="../../api/stochasticdiffeq/nonstiff/commutative_noise/">Commutative Noise Methods</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-11-4" type="checkbox"/><label class="tocitem" for="menuitem-11-4"><span class="docs-label">Stiff Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/stochasticdiffeq/stiff/implicit_methods/">Implicit Methods for Stiff SDEs</a></li><li><a class="tocitem" href="../../api/stochasticdiffeq/stiff/split_step_methods/">Split-Step Methods for Fully Stiff Problems</a></li><li><a class="tocitem" href="../../api/stochasticdiffeq/stiff/stabilized_methods/">Stabilized Methods (SROCK Family)</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-11-5" type="checkbox"/><label class="tocitem" for="menuitem-11-5"><span class="docs-label">Jump Diffusion</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/stochasticdiffeq/jumpdiffusion/tau_leaping/">Tau-Leaping Methods for Jump-Diffusion</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-11-6" type="checkbox"/><label class="tocitem" for="menuitem-11-6"><span class="docs-label">Misc Solvers</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../api/stochasticdiffeq/misc/">Miscellaneous Methods</a></li></ul></li></ul></li><li><span class="tocitem">Extra Details</span><ul><li><a class="tocitem" href="../../extras/timestepping/">Timestepping Method Descriptions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Basics</a></li><li class="is-active"><a href>Integrator Interface</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Integrator Interface</a></li></ul></nav><div class="docs-right"><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="integrator"><a class="docs-heading-anchor" href="#integrator">Integrator Interface</a><a id="integrator-1"></a><a class="docs-heading-anchor-permalink" href="#integrator" title="Permalink"></a></h1><p>The integrator interface gives one the ability to interactively step through the numerical solving of a differential equation. Through this interface, one can easily monitor results, modify the problem during a run, and dynamically continue solving as one sees fit.</p><h2 id="Initialization-and-Stepping"><a class="docs-heading-anchor" href="#Initialization-and-Stepping">Initialization and Stepping</a><a id="Initialization-and-Stepping-1"></a><a class="docs-heading-anchor-permalink" href="#Initialization-and-Stepping" title="Permalink"></a></h2><p>To initialize an integrator, use the syntax:</p><pre><code class="language-julia hljs">integrator = init(prob, alg; kwargs...)</code></pre><p>The keyword args which are accepted are the same as the <a href="../common_solver_opts/#solver_options">solver options</a> used by <code>solve</code> and the returned value is an <code>integrator</code> which satisfies <code>typeof(integrator)&lt;:DEIntegrator</code>. One can manually choose to step via the <code>step!</code> command:</p><pre><code class="language-julia hljs">step!(integrator)</code></pre><p>which will take one successful step. Additionally:</p><pre><code class="language-julia hljs">step!(integrator, dt, false)</code></pre><p>passing a <code>dt</code> will make the integrator continue to step until at least <code>integrator.t+dt</code>, and passing <code>true</code> as the third argument will add a <code>tstop</code> to force it to step up to <code>integrator.t+dt</code>, exactly.</p><p>To check whether the integration step was successful, you can call <code>check_error(integrator)</code> which returns one of the <a href="../solution/#retcodes">return codes</a>.</p><p>This type also implements an iterator interface, so one can step <code>n</code> times (or to the last <code>tstop</code>) using the <code>take</code> iterator:</p><pre><code class="language-julia hljs">for i in take(integrator, n)
end</code></pre><p>One can loop to the end by using <code>solve!(integrator)</code> or using the iterator interface:</p><pre><code class="language-julia hljs">for i in integrator
end</code></pre><p>In addition, some helper iterators are provided to help monitor the solution. For example, the <code>tuples</code> iterator lets you view the values:</p><pre><code class="language-julia hljs">for (u, t) in tuples(integrator)
    @show u, t
end</code></pre><p>and the <code>intervals</code> iterator lets you view the full interval:</p><pre><code class="language-julia hljs">for (uprev, tprev, u, t) in intervals(integrator)
    @show tprev, t
end</code></pre><p>Additionally, you can make the iterator return specific time points via the <code>TimeChoiceIterator</code>:</p><pre><code class="language-julia hljs">ts = range(0, stop = 1, length = 11)
for (u, t) in TimeChoiceIterator(integrator, ts)
    @show u, t
end</code></pre><p>Lastly, one can dynamically control the “endpoint”. The initialization simply makes <code>prob.tspan[2]</code> the last value of <code>tstop</code>, and many of the iterators are made to stop at the final <code>tstop</code> value. However, <code>step!</code> will always take a step, and one can dynamically add new values of <code>tstops</code> by modifying the variable in the options field: <code>add_tstop!(integrator,new_t)</code>.</p><p>Finally, to solve to the last <code>tstop</code>, call <code>solve!(integrator)</code>. Doing <code>init</code> and then <code>solve!</code> is equivalent to <code>solve</code>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="CommonSolve.step!" href="#CommonSolve.step!"><code>CommonSolve.step!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">step!(integ::DEIntegrator [, dt [, stop_at_tdt]])</code></pre><p>Perform one (successful) step on the integrator.</p><p>Alternative, if a <code>dt</code> is given, then <code>step!</code> the integrator until there is a temporal difference <code>≥ dt</code> in <code>integ.t</code>.  When <code>true</code> is passed to the optional third argument, the integrator advances exactly <code>dt</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.check_error" href="#SciMLBase.check_error"><code>SciMLBase.check_error</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">check_error(integrator)</code></pre><p>Check state of <code>integrator</code> and return one of the <a href="https://docs.sciml.ai/DiffEqDocs/stable/basics/solution/#retcodes">Return Codes</a></p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.check_error!" href="#SciMLBase.check_error!"><code>SciMLBase.check_error!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">check_error!(integrator)</code></pre><p>Same as <code>check_error</code> but also set solution&#39;s return code (<code>integrator.sol.retcode</code>) and run <code>postamble!</code>.</p></div></section></article><h2 id="Handling-Integrators"><a class="docs-heading-anchor" href="#Handling-Integrators">Handling Integrators</a><a id="Handling-Integrators-1"></a><a class="docs-heading-anchor-permalink" href="#Handling-Integrators" title="Permalink"></a></h2><p>The <code>integrator&lt;:DEIntegrator</code> type holds all the information for the intermediate solution of the differential equation. Useful fields are:</p><ul><li><code>t</code> - time of the proposed step</li><li><code>u</code> - value at the proposed step</li><li><code>p</code> - user-provided data</li><li><code>opts</code> - common solver options</li><li><code>alg</code> - the algorithm associated with the solution</li><li><code>f</code> - the function being solved</li><li><code>sol</code> - the current state of the solution</li><li><code>tprev</code> - the last timepoint</li><li><code>uprev</code> - the value at the last timepoint</li><li><code>tdir</code> - the sign for the direction of time</li></ul><p>The function <code>f</code> is usually a wrapper of the function provided when creating the specific problem. For example, when solving an <code>ODEProblem</code>, <code>f</code> will be an <code>ODEFunction</code>. To access the right-hand side function provided by the user when creating the <code>ODEProblem</code>, please use <code>SciMLBase.unwrapped_f(integrator.f.f)</code>.</p><p>The <code>p</code> is the (parameter) data which is provided by the user as a keyword arg in <code>init</code>. <code>opts</code> holds all the common solver options, and can be mutated to change the solver characteristics. For example, to modify the absolute tolerance for the future timesteps, one can do:</p><pre><code class="language-julia hljs">integrator.opts.abstol = 1e-9</code></pre><p>The <code>sol</code> field holds the current solution. This current solution includes the interpolation function if available, and thus <code>integrator.sol(t)</code> lets one interpolate efficiently over the whole current solution. Additionally, a “current interval interpolation function” is provided on the <code>integrator</code> type via <code>integrator(t,deriv::Type=Val{0};idxs=nothing,continuity=:left)</code>. This uses only the solver information from the interval <code>[tprev,t]</code> to compute the interpolation, and is allowed to extrapolate beyond that interval.</p><h3 id="Note-about-mutating"><a class="docs-heading-anchor" href="#Note-about-mutating">Note about mutating</a><a id="Note-about-mutating-1"></a><a class="docs-heading-anchor-permalink" href="#Note-about-mutating" title="Permalink"></a></h3><p>Be cautious: one should not directly mutate the <code>t</code> and <code>u</code> fields of the integrator. Doing so will destroy the accuracy of the interpolator and can harm certain algorithms. Instead, if one wants to introduce discontinuous changes, one should use the <a href="../../features/callback_functions/#callbacks">callbacks</a>. Modifications within a callback <code>affect!</code> surrounded by saves provides an error-free handling of the discontinuity.</p><p>As low-level alternative to the callbacks, one can use <code>set_t!</code>, <code>set_u!</code> and <code>set_ut!</code> to mutate integrator states.  Note that certain integrators may not have efficient ways to modify <code>u</code> and <code>t</code>.  In such case, <code>set_*!</code> are as inefficient as <code>reinit!</code>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.set_t!" href="#SciMLBase.set_t!"><code>SciMLBase.set_t!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_t!(integrator::DEIntegrator, t)</code></pre><p>Set current time point of the <code>integrator</code> to <code>t</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.set_u!" href="#SciMLBase.set_u!"><code>SciMLBase.set_u!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_u!(integrator::DEIntegrator, u)
set_u!(integrator::DEIntegrator, sym, val)</code></pre><p>Set current state of the <code>integrator</code> to <code>u</code>. Alternatively, set the state of variable <code>sym</code> to value <code>val</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.set_ut!" href="#SciMLBase.set_ut!"><code>SciMLBase.set_ut!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_ut!(integrator::DEIntegrator, u, t)</code></pre><p>Set current state of the <code>integrator</code> to <code>u</code> and <code>t</code></p></div></section></article><h3 id="Integrator-vs-Solution"><a class="docs-heading-anchor" href="#Integrator-vs-Solution">Integrator vs Solution</a><a id="Integrator-vs-Solution-1"></a><a class="docs-heading-anchor-permalink" href="#Integrator-vs-Solution" title="Permalink"></a></h3><p>The integrator and the solution have very different actions because they have very different meanings. The <code>typeof(sol) &lt;: DESolution</code> type is a type with history: it stores all the (requested) timepoints and interpolates/acts using the values closest in time. On the other hand, the <code>typeof(integrator)&lt;:DEIntegrator</code> type is a local object. It only knows the times of the interval it currently spans, the current caches and values, and the current state of the solver (the current options, tolerances, etc.). These serve very different purposes:</p><ul><li>The <code>integrator</code>&#39;s interpolation can extrapolate, both forward and backward in time. This is used to estimate events and is internally used for predictions.</li><li>The <code>integrator</code> is fully mutable upon iteration. This means that every time an iterator affect is used, it will take timesteps from the current time. This means that <code>first(integrator)!=first(integrator)</code> since the <code>integrator</code> will step once to evaluate the left and then step once more (not backtracking). This allows the iterator to keep dynamically stepping, though one should note that it may violate some immutability assumptions commonly made about iterators.</li></ul><p>If one wants the solution object, then one can find it in <code>integrator.sol</code>.</p><h2 id="Function-Interface"><a class="docs-heading-anchor" href="#Function-Interface">Function Interface</a><a id="Function-Interface-1"></a><a class="docs-heading-anchor-permalink" href="#Function-Interface" title="Permalink"></a></h2><p>In addition to the type interface, a function interface is provided which allows for safe modifications of the integrator type, and allows for uniform usage throughout the ecosystem (for packages/algorithms which implement the functions). The following functions make up the interface:</p><h3 id="Saving-Controls"><a class="docs-heading-anchor" href="#Saving-Controls">Saving Controls</a><a id="Saving-Controls-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-Controls" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.savevalues!" href="#SciMLBase.savevalues!"><code>SciMLBase.savevalues!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">savevalues!(integrator::DEIntegrator,
  force_save=false) -&gt; Tuple{Bool, Bool}</code></pre><p>Try to save the state and time variables at the current time point, or the <code>saveat</code> point by using interpolation when appropriate. It returns a tuple that is <code>(saved, savedexactly)</code>. If <code>savevalues!</code> saved value, then <code>saved</code> is true, and if <code>savevalues!</code> saved at the current time point, then <code>savedexactly</code> is true.</p><p>The saving priority/order is as follows:</p><ul><li><p><code>save_on</code></p><ul><li><code>saveat</code></li><li><code>force_save</code></li><li><code>save_everystep</code></li></ul></li></ul></div></section></article><h3 id="Caches"><a class="docs-heading-anchor" href="#Caches">Caches</a><a id="Caches-1"></a><a class="docs-heading-anchor-permalink" href="#Caches" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.get_tmp_cache" href="#SciMLBase.get_tmp_cache"><code>SciMLBase.get_tmp_cache</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_tmp_cache(i::DEIntegrator)</code></pre><p>Returns a tuple of internal cache vectors which are safe to use as temporary arrays. This should be used for integrator interface and callbacks which need arrays to write into in order to be non-allocating. The length of the tuple is dependent on the method.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.full_cache" href="#SciMLBase.full_cache"><code>SciMLBase.full_cache</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">full_cache(i::DEIntegrator)</code></pre><p>Returns an iterator over the cache arrays of the method. This can be used to change internal values as needed.</p></div></section></article><h3 id="stepping_controls"><a class="docs-heading-anchor" href="#stepping_controls">Stepping Controls</a><a id="stepping_controls-1"></a><a class="docs-heading-anchor-permalink" href="#stepping_controls" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.u_modified!" href="#SciMLBase.u_modified!"><code>SciMLBase.u_modified!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">u_modified!(i::DEIntegrator,bool)</code></pre><p>Sets <code>bool</code> which states whether a change to <code>u</code> occurred, allowing the solver to handle the discontinuity. By default, this is assumed to be true if a callback is used. This will result in the re-calculation of the derivative at <code>t+dt</code>, which is not necessary if the algorithm is FSAL and <code>u</code> does not experience a discontinuous change at the end of the interval. Thus, if <code>u</code> is unmodified in a callback, a single call to the derivative calculation can be eliminated by <code>u_modified!(integrator,false)</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.get_proposed_dt" href="#SciMLBase.get_proposed_dt"><code>SciMLBase.get_proposed_dt</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_proposed_dt(i::DEIntegrator)</code></pre><p>Gets the proposed <code>dt</code> for the next timestep.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.set_proposed_dt!" href="#SciMLBase.set_proposed_dt!"><code>SciMLBase.set_proposed_dt!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">set_proposed_dt!(i::DEIntegrator,dt)
set_proposed_dt!(i::DEIntegrator,i2::DEIntegrator)</code></pre><p>Sets the proposed <code>dt</code> for the next timestep. If the second argument isa <code>DEIntegrator</code>, then it sets the timestepping of the first argument to match that of the second one. Note that due to PI control and step acceleration, this is more than matching the factors in most cases.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.terminate!" href="#SciMLBase.terminate!"><code>SciMLBase.terminate!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">terminate!(i::DEIntegrator[, retcode = :Terminated])</code></pre><p>Terminates the integrator by emptying <code>tstops</code>. This can be used in events and callbacks to immediately end the solution process.  Optionally, <code>retcode</code> may be specified (see: <a href="../solution/#retcodes">Return Codes (RetCodes)</a>).</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.change_t_via_interpolation!" href="#SciMLBase.change_t_via_interpolation!"><code>SciMLBase.change_t_via_interpolation!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">change_t_via_interpolation!(integrator::DEIntegrator,t,modify_save_endpoint=Val{false},reinitialize_alg=nothing)</code></pre><p>Modifies the current <code>t</code> and changes all of the corresponding values using the local interpolation. If the current solution has already been saved, one can provide the optional value <code>modify_save_endpoint</code> to also modify the endpoint of <code>sol</code> in the same manner.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.add_tstop!" href="#SciMLBase.add_tstop!"><code>SciMLBase.add_tstop!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_tstop!(i::DEIntegrator,t)</code></pre><p>Adds a <code>tstop</code> at time <code>t</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.has_tstop" href="#SciMLBase.has_tstop"><code>SciMLBase.has_tstop</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">has_tstop(i::DEIntegrator)</code></pre><p>Checks if integrator has any stopping times defined.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.first_tstop" href="#SciMLBase.first_tstop"><code>SciMLBase.first_tstop</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">first_tstop(i::DEIntegrator)</code></pre><p>Gets the first stopping time of the integrator.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.pop_tstop!" href="#SciMLBase.pop_tstop!"><code>SciMLBase.pop_tstop!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">pop_tstop!(i::DEIntegrator)</code></pre><p>Pops the last stopping time from the integrator.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.add_saveat!" href="#SciMLBase.add_saveat!"><code>SciMLBase.add_saveat!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">add_saveat!(i::DEIntegrator,t)</code></pre><p>Adds a <code>saveat</code> time point at <code>t</code>.</p></div></section></article><h3 id="Resizing"><a class="docs-heading-anchor" href="#Resizing">Resizing</a><a id="Resizing-1"></a><a class="docs-heading-anchor-permalink" href="#Resizing" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.resize!" href="#Base.resize!"><code>Base.resize!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">resize!(integrator::DEIntegrator,k::Int)</code></pre><p>Resizes the DE to a size <code>k</code>. This chops off the end of the array, or adds blank values at the end, depending on whether <code>k &gt; length(integrator.u)</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Base.deleteat!" href="#Base.deleteat!"><code>Base.deleteat!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">deleteat!(integrator::DEIntegrator,idxs)</code></pre><p>Shrinks the ODE by deleting the <code>idxs</code> components.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.addat!" href="#SciMLBase.addat!"><code>SciMLBase.addat!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">addat!(integrator::DEIntegrator,idxs,val)</code></pre><p>Grows the ODE by adding the <code>idxs</code> components. Must be contiguous indices.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.resize_non_user_cache!" href="#SciMLBase.resize_non_user_cache!"><code>SciMLBase.resize_non_user_cache!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">resize_non_user_cache!(integrator::DEIntegrator,k::Int)</code></pre><p>Resizes the non-user facing caches to be compatible with a DE of size <code>k</code>. This includes resizing Jacobian caches.</p><div class="admonition is-info" id="Note-d5766f1a86f12f17"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-d5766f1a86f12f17" title="Permalink"></a></header><div class="admonition-body"><p>In many cases, <a href="#Base.resize!"><code>resize!</code></a> simply resizes <a href="#SciMLBase.full_cache"><code>full_cache</code></a> variables and then calls this function. This finer control is required for some <code>AbstractArray</code> operations.</p></div></div></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.deleteat_non_user_cache!" href="#SciMLBase.deleteat_non_user_cache!"><code>SciMLBase.deleteat_non_user_cache!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">deleteat_non_user_cache!(integrator::DEIntegrator,idxs)</code></pre><p><a href="#Base.deleteat!"><code>deleteat!</code></a>s the non-user facing caches at indices <code>idxs</code>. This includes resizing Jacobian caches.</p><div class="admonition is-info" id="Note-3e4a48330ebd6b0"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-3e4a48330ebd6b0" title="Permalink"></a></header><div class="admonition-body"><p>In many cases, <code>deleteat!</code> simply <code>deleteat!</code>s <a href="#SciMLBase.full_cache"><code>full_cache</code></a> variables and then calls this function. This finer control is required for some <code>AbstractArray</code> operations.</p></div></div></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.addat_non_user_cache!" href="#SciMLBase.addat_non_user_cache!"><code>SciMLBase.addat_non_user_cache!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">addat_non_user_cache!(i::DEIntegrator,idxs)</code></pre><p><a href="#SciMLBase.addat!"><code>addat!</code></a>s the non-user facing caches at indices <code>idxs</code>. This includes resizing Jacobian caches.</p><div class="admonition is-info" id="Note-a0b6d9e9d40496a0"><header class="admonition-header">Note<a class="admonition-anchor" href="#Note-a0b6d9e9d40496a0" title="Permalink"></a></header><div class="admonition-body"><p>In many cases, <code>addat!</code> simply <code>addat!</code>s <a href="#SciMLBase.full_cache"><code>full_cache</code></a> variables and then calls this function. This finer control is required for some <code>AbstractArray</code> operations.</p></div></div></div></section></article><h3 id="Reinitialization"><a class="docs-heading-anchor" href="#Reinitialization">Reinitialization</a><a id="Reinitialization-1"></a><a class="docs-heading-anchor-permalink" href="#Reinitialization" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.reinit!" href="#SciMLBase.reinit!"><code>SciMLBase.reinit!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">reinit!(integrator::DEIntegrator,args...; kwargs...)</code></pre><p>The reinit function lets you restart the integration at a new value.</p><p><strong>Arguments</strong></p><ul><li><code>u0</code>: Value of <code>u</code> to start at. Default value is <code>integrator.sol.prob.u0</code></li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>t0</code>: Starting timepoint. Default value is <code>integrator.sol.prob.tspan[1]</code></li><li><code>tf</code>: Ending timepoint. Default value is <code>integrator.sol.prob.tspan[2]</code></li><li><code>erase_sol=true</code>: Whether to start with no other values in the solution, or keep the previous solution.</li><li><code>tstops</code>, <code>d_discontinuities</code>, &amp; <code>saveat</code>: Cache where these are stored. Default is the original cache.</li><li><code>reset_dt</code>: Set whether to reset the current value of <code>dt</code> using the automatic <code>dt</code> determination algorithm. Default is <code>(integrator.dtcache == zero(integrator.dt)) &amp;&amp; integrator.opts.adaptive</code></li><li><code>reinit_callbacks</code>: Set whether to run the callback initializations again (and <code>initialize_save</code> is for that). Default is <code>true</code>.</li><li><code>reinit_cache</code>: Set whether to re-run the cache initialization function (i.e. resetting FSAL, not allocating vectors) which should usually be true for correctness. Default is <code>true</code>.</li></ul><p>Additionally, once can access <a href="#SciMLBase.auto_dt_reset!"><code>auto_dt_reset!</code></a> which will run the auto <code>dt</code> initialization algorithm.</p></div></section><section><div><pre><code class="language-julia hljs">reinit!(integrator::DDEIntegrator[, u0 = integrator.sol.prob.u0;
        t0 = integrator.sol.prob.tspan[1],
        tf = integrator.sol.prob.tspan[2],
        erase_sol = true,
        kwargs...])</code></pre><p>Reinitialize <code>integrator</code> with (optionally) different initial state <code>u0</code>, different integration interval from <code>t0</code> to <code>tf</code>, and erased solution if <code>erase_sol = true</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.auto_dt_reset!" href="#SciMLBase.auto_dt_reset!"><code>SciMLBase.auto_dt_reset!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">auto_dt_reset!(integrator::DEIntegrator)</code></pre><p>Run the auto <code>dt</code> initialization algorithm.</p></div></section></article><h3 id="Misc"><a class="docs-heading-anchor" href="#Misc">Misc</a><a id="Misc-1"></a><a class="docs-heading-anchor-permalink" href="#Misc" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.get_du" href="#SciMLBase.get_du"><code>SciMLBase.get_du</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_du(i::DEIntegrator)</code></pre><p>Returns the derivative at <code>t</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="SciMLBase.get_du!" href="#SciMLBase.get_du!"><code>SciMLBase.get_du!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_du!(out,i::DEIntegrator)</code></pre><p>Write the current derivative at <code>t</code> into <code>out</code>.</p></div></section></article><div class="admonition is-warning" id="Warning-ebafdb0d9095e5ba"><header class="admonition-header">Warning<a class="admonition-anchor" href="#Warning-ebafdb0d9095e5ba" title="Permalink"></a></header><div class="admonition-body"><p>Note that not all these functions will be implemented for every algorithm. Some have hard limitations. For example, Sundials.jl cannot resize problems. When a function is not limited, an error will be thrown.</p></div></div><h2 id="Additional-Options"><a class="docs-heading-anchor" href="#Additional-Options">Additional Options</a><a id="Additional-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-Options" title="Permalink"></a></h2><p>The following options can additionally be specified in <code>init</code> (or be mutated in the <code>opts</code>) for further control of the integrator:</p><ul><li><code>advance_to_tstop</code>: This makes <code>step!</code> continue to the next value in <code>tstop</code>.</li><li><code>stop_at_next_tstop</code>: This forces the iterators to stop at the next value of <code>tstop</code>.</li></ul><p>For example, if one wants to iterate but only stop at specific values, one can choose:</p><pre><code class="language-julia hljs">integrator = DE.init(
    prob, DE.Tsit5(); dt = 1 // 2^(4), tstops = [0.5], advance_to_tstop = true)
for (u, t) in tuples(integrator)
    @test t ∈ [0.5, 1.0]
end</code></pre><p>which will only enter the loop body at the values in <code>tstops</code> (here, <code>prob.tspan[2]==1.0</code> and thus there are two values of <code>tstops</code> which are hit). Additionally, one can <code>solve!</code> only to <code>0.5</code> via:</p><pre><code class="language-julia hljs">integrator = DE.init(prob, DE.Tsit5(); dt = 1 // 2^(4), tstops = [0.5])
integrator.opts.stop_at_next_tstop = true
solve!(integrator)</code></pre><h2 id="Plot-Recipe"><a class="docs-heading-anchor" href="#Plot-Recipe">Plot Recipe</a><a id="Plot-Recipe-1"></a><a class="docs-heading-anchor-permalink" href="#Plot-Recipe" title="Permalink"></a></h2><p>Like the <code>DESolution</code> type, a plot recipe is provided for the <code>DEIntegrator</code> type. Since the <code>DEIntegrator</code> type is a local state type on the current interval, <code>plot(integrator)</code> returns the solution on the current interval. The same options for the plot recipe are provided as for <code>sol</code>, meaning one can choose variables via the <code>idxs</code> keyword argument, or change the <code>plotdensity</code> / turn on/off <code>denseplot</code>.</p><p>Additionally, since the <code>integrator</code> is an iterator, this can be used in the Plots.jl <code>animate</code> command to iteratively build an animation of the solution while solving the differential equation.</p><p>For an example of manually chaining together the iterator interface and plotting, one should try the following:</p><pre><code class="language-julia hljs">import DifferentialEquations as DE, DiffEqProblemLibrary, Plots

# Linear ODE which starts at 0.5 and solves from t=0.0 to t=1.0
prob = DE.ODEProblem((u, p, t) -&gt; 1.01u, 0.5, (0.0, 1.0))

import Plots
integrator = DE.init(prob, DE.Tsit5(); dt = 1 // 2^(4), tstops = [0.5])
pyplot(show = true)
Plots.plot(integrator)
for i in integrator
    display(Plots.plot!(integrator, idxs = (0, 1), legend = false))
end
DE.step!(integrator);
Plots.plot!(integrator, idxs = (0, 1), legend = false);
savefig(&quot;iteratorplot.png&quot;)</code></pre><p><img src="../../assets/iteratorplot.png" alt="Iterator Plot"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../plot/">« Plot Functions</a><a class="docs-footer-nextpage" href="../problem/">Problem Interface »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Wednesday 17 September 2025 17:07">Wednesday 17 September 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
