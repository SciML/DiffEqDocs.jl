<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reduced Compile Time, Optimizing Runtime, and Low Dependency Usage · DifferentialEquations.jl</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-90474609-3"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-90474609-3', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://diffeq.sciml.ai/stable/features/low_dep/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="DifferentialEquations.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">DifferentialEquations.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">DifferentialEquations.jl: Scientific Machine Learning (SciML) Enabled Simulation and Estimation</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/ode_example/">Ordinary Differential Equations</a></li><li><a class="tocitem" href="../../tutorials/faster_ode_example/">Code Optimization for Differential Equations</a></li><li><a class="tocitem" href="../../tutorials/advanced_ode_example/">Solving Large Stiff Equations</a></li><li><a class="tocitem" href="../../tutorials/sde_example/">Stochastic Differential Equations</a></li><li><a class="tocitem" href="../../tutorials/rode_example/">Random Ordinary Differential Equations</a></li><li><a class="tocitem" href="../../tutorials/dde_example/">Delay Differential Equations</a></li><li><a class="tocitem" href="../../tutorials/dae_example/">Differential Algebraic Equations</a></li><li><a class="tocitem" href="../../tutorials/discrete_stochastic_example/">Continuous-Time Jump Processes and Gillespie Methods</a></li><li><a class="tocitem" href="../../tutorials/jump_diffusion/">Jump Diffusion Equations</a></li><li><a class="tocitem" href="../../tutorials/bvp_example/">Boundary Value Problems</a></li><li><a class="tocitem" href="../../tutorials/additional/">Additional Tutorials</a></li></ul></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../../basics/overview/">Overview of DifferentialEquations.jl</a></li><li><a class="tocitem" href="../../basics/common_solver_opts/">Common Solver Options (Solve Keyword Arguments)</a></li><li><a class="tocitem" href="../../basics/solution/">Solution Handling</a></li><li><a class="tocitem" href="../../basics/plot/">Plot Functions</a></li><li><a class="tocitem" href="../../basics/integrator/">Integrator Interface</a></li><li><a class="tocitem" href="../../basics/problem/">Problem Interface</a></li><li><a class="tocitem" href="../../basics/faq/">Frequently Asked Questions</a></li><li><a class="tocitem" href="../../basics/compatibility_chart/">Solver Compatibility Chart</a></li></ul></li><li><span class="tocitem">Problem Types</span><ul><li><a class="tocitem" href="../../types/discrete_types/">Discrete Problems</a></li><li><a class="tocitem" href="../../types/ode_types/">ODE Problems</a></li><li><a class="tocitem" href="../../types/nonautonomous_linear_ode/">Non-autonomous Linear ODE / Lie Group Problems</a></li><li><a class="tocitem" href="../../types/dynamical_types/">Dynamical, Hamiltonian and 2nd Order ODE Problems</a></li><li><a class="tocitem" href="../../types/split_ode_types/">Split ODE Problems</a></li><li><a class="tocitem" href="../../types/steady_state_types/">Steady State Problems</a></li><li><a class="tocitem" href="../../types/bvp_types/">BVP Problems</a></li><li><a class="tocitem" href="../../types/sde_types/">SDE Problems</a></li><li><a class="tocitem" href="../../types/sdae_types/">SDAE Problems</a></li><li><a class="tocitem" href="../../types/rode_types/">RODE Problems</a></li><li><a class="tocitem" href="../../types/dde_types/">DDE Problems</a></li><li><a class="tocitem" href="../../types/sdde_types/">SDDE Problems</a></li><li><a class="tocitem" href="../../types/dae_types/">DAE Problems</a></li><li><a class="tocitem" href="../../types/jump_types/">Jump Problems</a></li></ul></li><li><span class="tocitem">Solver Algorithms</span><ul><li><a class="tocitem" href="../../solvers/discrete_solve/">Discrete Solvers</a></li><li><a class="tocitem" href="../../solvers/ode_solve/">ODE Solvers</a></li><li><a class="tocitem" href="../../solvers/nonautonomous_linear_ode/">Non-autonomous Linear ODE / Lie Group ODE Solvers</a></li><li><a class="tocitem" href="../../solvers/dynamical_solve/">Dynamical, Hamiltonian, and 2nd Order ODE Solvers</a></li><li><a class="tocitem" href="../../solvers/split_ode_solve/">Split ODE Solvers</a></li><li><a class="tocitem" href="../../solvers/steady_state_solve/">Steady State Solvers</a></li><li><a class="tocitem" href="../../solvers/bvp_solve/">BVP Solvers</a></li><li><a class="tocitem" href="../../solvers/jump_solve/">Jump Problem and Jump Diffusion Solvers</a></li><li><a class="tocitem" href="../../solvers/sde_solve/">SDE Solvers</a></li><li><a class="tocitem" href="../../solvers/sdae_solve/">SDAE Solvers</a></li><li><a class="tocitem" href="../../solvers/rode_solve/">RODE Solvers</a></li><li><a class="tocitem" href="../../solvers/dde_solve/">DDE Solvers</a></li><li><a class="tocitem" href="../../solvers/sdde_solve/">SDDE Solvers</a></li><li><a class="tocitem" href="../../solvers/dae_solve/">DAE Solvers</a></li><li><a class="tocitem" href="../../solvers/benchmarks/">Solver Benchmarks</a></li></ul></li><li><span class="tocitem">Additional Features</span><ul><li><a class="tocitem" href="../performance_overloads/">Jacobians, Gradients, etc.</a></li><li><a class="tocitem" href="../diffeq_arrays/">DiffEq-Specific Array Types</a></li><li><a class="tocitem" href="../diffeq_operator/">DiffEqOperators</a></li><li><a class="tocitem" href="../noise_process/">Noise Processes</a></li><li><a class="tocitem" href="../linear_nonlinear/">Specifying (Non)Linear Solvers and Preconditioners</a></li><li><a class="tocitem" href="../callback_functions/">Event Handling and Callback Functions</a></li><li><a class="tocitem" href="../callback_library/">Callback Library</a></li><li><a class="tocitem" href="../ensemble/">Parallel Ensemble Simulations</a></li><li><a class="tocitem" href="../io/">I/O: Saving and Loading Solution Data</a></li><li class="is-active"><a class="tocitem" href>Reduced Compile Time, Optimizing Runtime, and Low Dependency Usage</a><ul class="internal"><li><a class="tocitem" href="#Controlling-Function-Specialization-and-Precompilation"><span>Controlling Function Specialization and Precompilation</span></a></li><li><a class="tocitem" href="#Decreasing-Dependency-Size-by-Direct-Dependence-on-Specific-Solvers"><span>Decreasing Dependency Size by Direct Dependence on Specific Solvers</span></a></li></ul></li><li><a class="tocitem" href="../progress_bar/">Progress Bar Integration</a></li></ul></li><li><span class="tocitem">Analysis Tools</span><ul><li><a class="tocitem" href="../../analysis/parameterized_functions/">ParameterizedFunctions</a></li><li><a class="tocitem" href="../../analysis/parameter_estimation/">Parameter Estimation and Bayesian Analysis</a></li><li><a class="tocitem" href="../../analysis/bifurcation/">Bifurcation Analysis</a></li><li><a class="tocitem" href="../../analysis/sensitivity/">Local Sensitivity Analysis (Automatic Differentiation)</a></li><li><a class="tocitem" href="../../analysis/global_sensitivity/">Global Sensitivity Analysis</a></li><li><a class="tocitem" href="../../analysis/uncertainty_quantification/">Uncertainty Quantification</a></li><li><a class="tocitem" href="../../analysis/neural_networks/">Neural Networks</a></li><li><a class="tocitem" href="../../analysis/dev_and_test/">Algorithm Development and Testing</a></li></ul></li><li><span class="tocitem">Domain Modeling Tools</span><ul><li><a class="tocitem" href="../../models/multiscale/">Multi-Scale Models</a></li><li><a class="tocitem" href="../../models/physical/">Physical Models</a></li><li><a class="tocitem" href="../../models/financial/">Financial Models</a></li><li><a class="tocitem" href="../../models/chemical_reactions/">Chemical Reactions</a></li><li><a class="tocitem" href="../../models/external_modeling/">External Modeling Packages</a></li></ul></li><li><span class="tocitem">Extra Details</span><ul><li><a class="tocitem" href="../../extras/timestepping/">Timestepping Method Descriptions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Additional Features</a></li><li class="is-active"><a href>Reduced Compile Time, Optimizing Runtime, and Low Dependency Usage</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reduced Compile Time, Optimizing Runtime, and Low Dependency Usage</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/SciML/DiffEqDocs.jl/blob/master/docs/src/features/low_dep.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="low_dep"><a class="docs-heading-anchor" href="#low_dep">Reduced Compile Time, Optimizing Runtime, and Low Dependency Usage</a><a id="low_dep-1"></a><a class="docs-heading-anchor-permalink" href="#low_dep" title="Permalink"></a></h1><p>While DifferentialEquations.jl&#39;s defaults strike a balance between runtime and compile time performance, users should be aware that there are many options for controlling the dependency sizing and the compilation caching behavior to further refine this trade-off. The following methods are available for such controls.</p><h2 id="Controlling-Function-Specialization-and-Precompilation"><a class="docs-heading-anchor" href="#Controlling-Function-Specialization-and-Precompilation">Controlling Function Specialization and Precompilation</a><a id="Controlling-Function-Specialization-and-Precompilation-1"></a><a class="docs-heading-anchor-permalink" href="#Controlling-Function-Specialization-and-Precompilation" title="Permalink"></a></h2><p>By default, DifferentialEquations.jl solvers make use of function wrapping techniques in order to fully precompile the solvers and thus decrease the compile time. However, in some cases you may wish to control this behavior, pushing more towards faster runtimes or faster compile times. This can be done by using the <code>specialization</code> arguments of the <code>AbstractDEProblem</code>  constructors.</p><p>For example, with the <code>ODEProblem</code> we have <code>ODEProblem{iip,specialize}(...)</code>. The this second type parameter controls the specialization level with the following choices:</p><ul><li><code>SciMLBase.AutoSpecialize</code>: the default. Uses a late wrapping scheme to hit a balance between runtime and compile time.</li><li><code>SciMLBase.NoSpecialize</code>: this will never specialize on the constituant functions, having the least compile time but the highest runtime.</li><li><code>SciMLBase.FullSpecialize</code>: this will fully re-specialize the solver on the given ODE, achieving the fastest runtimes while increasing the compile times. This is what is recommended when benchmarking and when running long computations, such as in optimization loops.</li></ul><p>For more information on the specialization levels, please see <a href="https://scimlbase.sciml.ai/stable/interfaces/Problems/#Specialization-Levels">the SciMLBase documentation on specialization levels</a>.</p><p>DifferentialEquations.jl and its ODE package OrdinaryDiffEq.jl precompile some standard problem types and solvers. The problem types include the three specialization levels described above and the default setting. The solvers include some</p><ul><li>standard solvers for non-stiff problems such as <code>Tsit5()</code></li><li>standard solvers for stiff problems such as <code>Rosenbrock23()</code></li><li>standard solvers with stiffnes detction such as <code>AutoTsit5(Rosenbrock23())</code></li><li>low-storage methods for conservation laws such as <code>SSPRK43()</code> (precompilation disabled by default)</li></ul><p>To adapt the amount of precompilation, you can use  <a href="https://github.com/JuliaPackaging/Preferences.jl">Preferences.jl</a>. For example, to turn off precompilation for non-default problem types (specialization levels) and all stiff/implicit/low-storage solvers,  you can execute the following code in your active project.</p><pre><code class="nohighlight hljs">using Preferences, UUIDs
set_preferences!(UUID(&quot;1dea7af3-3e70-54e6-95c3-0bf5283fa5ed&quot;), &quot;PrecompileNonStiff&quot; =&gt; true)
set_preferences!(UUID(&quot;1dea7af3-3e70-54e6-95c3-0bf5283fa5ed&quot;), &quot;PrecompileStiff&quot; =&gt; false)
set_preferences!(UUID(&quot;1dea7af3-3e70-54e6-95c3-0bf5283fa5ed&quot;), &quot;PrecompileAutoSwitch&quot; =&gt; false)
set_preferences!(UUID(&quot;1dea7af3-3e70-54e6-95c3-0bf5283fa5ed&quot;), &quot;PrecompileLowStorage&quot; =&gt; false)
set_preferences!(UUID(&quot;1dea7af3-3e70-54e6-95c3-0bf5283fa5ed&quot;), &quot;PrecompileDefaultSpecialize&quot; =&gt; true)
set_preferences!(UUID(&quot;1dea7af3-3e70-54e6-95c3-0bf5283fa5ed&quot;), &quot;PrecompileAutoSpecialize&quot; =&gt; false)
set_preferences!(UUID(&quot;1dea7af3-3e70-54e6-95c3-0bf5283fa5ed&quot;), &quot;PrecompileFunctionWrapperSpecialize&quot; =&gt; false)
set_preferences!(UUID(&quot;1dea7af3-3e70-54e6-95c3-0bf5283fa5ed&quot;), &quot;PrecompileNoSpecialize&quot; =&gt; false)</code></pre><p>This will create a <code>LocalPreferences.toml</code> file next to the currently active <code>Project.toml</code> file.</p><h2 id="Decreasing-Dependency-Size-by-Direct-Dependence-on-Specific-Solvers"><a class="docs-heading-anchor" href="#Decreasing-Dependency-Size-by-Direct-Dependence-on-Specific-Solvers">Decreasing Dependency Size by Direct Dependence on Specific Solvers</a><a id="Decreasing-Dependency-Size-by-Direct-Dependence-on-Specific-Solvers-1"></a><a class="docs-heading-anchor-permalink" href="#Decreasing-Dependency-Size-by-Direct-Dependence-on-Specific-Solvers" title="Permalink"></a></h2><p>DifferentialEquations.jl is a large library containing the functionality of many different solver and addon packages. However in many cases you may want to cut down on the size of the dependency and only use the parts of the the library which are essential to your application. This is possible due to SciML&#39;s modular package structure.</p><h3 id="Common-Example:-Using-only-OrdinaryDiffEq.jl"><a class="docs-heading-anchor" href="#Common-Example:-Using-only-OrdinaryDiffEq.jl">Common Example: Using only OrdinaryDiffEq.jl</a><a id="Common-Example:-Using-only-OrdinaryDiffEq.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Common-Example:-Using-only-OrdinaryDiffEq.jl" title="Permalink"></a></h3><p>One common example is using only the ODE solvers OrdinaryDiffEq.jl. The solvers all reexport SciMLBase.jl (which holds the problem and solution types) and so OrdinaryDiffEq.jl is all that&#39;s needed. Thus replacing</p><pre><code class="language-julia hljs">using DifferentialEquations</code></pre><p>with</p><pre><code class="language-julia hljs">#Add the OrdinaryDiffEq Package first!
#using Pkg; Pkg.add(&quot;OrdinaryDiffEq&quot;)
using OrdinaryDiffEq</code></pre><p>will work if these are the only features you are using.</p><h3 id="Generalizing-the-Idea"><a class="docs-heading-anchor" href="#Generalizing-the-Idea">Generalizing the Idea</a><a id="Generalizing-the-Idea-1"></a><a class="docs-heading-anchor-permalink" href="#Generalizing-the-Idea" title="Permalink"></a></h3><p>In general, you will always need SciMLBase.jl, since it defines all of the fundamental types, but the solvers will automatically reexport it. For solvers, you typically only need that solver package. So SciMLBase+Sundials, SciMLBase+LSODA, etc. will get you the common interface with that specific solver setup. SciMLBase.jl is a very lightweight dependency, so there is no issue here! For PDEs, you normally need SciMLBase+DiffEqPDEBase in addition to the solver package.</p><p>For the addon packages, you will normally need SciMLBase, the solver package you choose, and the addon package. So for example, for parameter estimation you would likely want SciMLBase+OrdinaryDiffEq+DiffEqParamEstim. If you aren&#39;t sure which package a specific command is from, then use <code>@which</code>. For example, from the parameter estimation docs we have:</p><pre><code class="language-julia hljs">using DifferentialEquations
function f(du,u,p,t)
  dx = p[1]*u[1] - u[1]*u[2]
  dy = -3*u[2] + u[1]*u[2]
end

u0 = [1.0;1.0]
tspan = (0.0,10.0)
p = [1.5]
prob = ODEProblem(f,u0,tspan,p)
sol = solve(prob,Tsit5())
t = collect(range(0, stop=10, length=200))
randomized = VectorOfArray([(sol(t[i]) + .01randn(2)) for i in 1:length(t)])
using RecursiveArrayTools
data = convert(Array,randomized)
cost_function = build_loss_objective(prob,t,data,Tsit5(),maxiters=10000)</code></pre><p>If we wanted to know where <code>build_loss_objective</code> came from, we can do:</p><pre><code class="language-julia hljs">@which build_loss_objective(prob,t,data,Tsit5(),maxiters=10000)

(::DiffEqParamEstim.#kw##build_loss_objective)(::Array{Any,1}, ::DiffEqParamEstim.#build_loss_objective, prob::SciMLBase.DEProblem, t, data, alg)</code></pre><p>This says it&#39;s in the DiffEqParamEstim.jl package. Thus in this case, we could have done</p><pre><code class="language-julia hljs">using OrdinaryDiffEq, DiffEqParamEstim</code></pre><p>instead of the full <code>using DifferentialEquations</code>. Note that due to the way Julia dependencies work, any internal function in the package will work. The only dependencies you need to explicitly <code>using</code> are the functions you are specifically calling. Thus this method can be used to determine all of the DiffEq packages you are using.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../io/">« I/O: Saving and Loading Solution Data</a><a class="docs-footer-nextpage" href="../progress_bar/">Progress Bar Integration »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Sunday 6 November 2022 14:17">Sunday 6 November 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
