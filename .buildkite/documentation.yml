steps:
  - label: ":page_facing_up: Build and Deploy Documentation"
    plugins:
      - JuliaCI/julia#v1:
          version: "1"
    command: |
      julia --project=docs -e '
        println("--- :julia: Instantiating project")
        using Pkg
        Pkg.develop(PackageSpec(path=pwd()))
        Pkg.instantiate()
        println("--- :julia: Building documentation")
        include("docs/make.jl")
      '
    agents:
      queue: "juliagpu"
      cuda: "*"
    if: build.message !~ /\[skip docs\]/ && !build.pull_request.draft
    timeout_in_minutes: 1000

env:
  JULIA_PKG_SERVER: "" # it often struggles with our large artifacts
  SECRET_DOCUMENTER_KEY: "RE2FFo9ZdNQc5H7cToBf9wnCCGan7gRVYmr2B6Xwl5NE7Zlnf2GuchNU5F3nIODEFBWrkZ3Ti/dfUibIs2t1RxgRAab3AfshaMazKW0VJtfAo4u+DAWOiBAf4jKdc2PGWNj295qL6f26DI3Hjx8Pc4DvDfMBmbbYKS6k3EQwvtjmIfprEFT10LBhdCVOSQOjDaCW1whPx72OQenvDgK9lEgV5Jw6Xl25q+vsN5SDtfFNY5fh6frNn7BR/A9Yv2ZhkRSWpLfKsVbrakLUXhPAVFh1q5v2DHAv69mhDmU3MtwFBu9W36Kw1BMmphvXN77PuQeBNsTPkvKRgkuyH1JZOg==;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"
  DATADEPS_ALWAYS_ACCEPT: true
  JULIA_DEBUG: "Documenter"
